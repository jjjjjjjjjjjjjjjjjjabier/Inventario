<Window x:Class="InventarioComputo.UI.Views.LoginView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:behaviors="clr-namespace:InventarioComputo.UI.Behaviors"
        xmlns:conv="clr-namespace:InventarioComputo.UI.Converters"
        mc:Ignorable="d"
        Title="{Binding Titulo}"
        Width="460"
        SizeToContent="Height"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="#0F172A">

  <Window.Resources>
    <!-- Estilos redondeados -->
    <Style x:Key="RoundedTextBoxStyle" TargetType="TextBox">
      <Setter Property="BorderBrush" Value="#E5E7EB"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="Background" Value="White"/>
      <Setter Property="Padding" Value="10,8"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="TextBox">
            <Border CornerRadius="8"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    Background="{TemplateBinding Background}">
              <ScrollViewer x:Name="PART_ContentHost"/>
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style x:Key="RoundedPasswordBoxStyle" TargetType="PasswordBox">
      <Setter Property="BorderBrush" Value="#E5E7EB"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="Background" Value="White"/>
      <Setter Property="Padding" Value="10,8"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="PasswordBox">
            <Border CornerRadius="8"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    Background="{TemplateBinding Background}">
              <ScrollViewer x:Name="PART_ContentHost"/>
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style x:Key="RoundedButtonStyle" TargetType="Button">
      <Setter Property="Foreground" Value="White"/>
      <Setter Property="Background" Value="#2563EB"/>
      <Setter Property="Padding" Value="14,8"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="Cursor" Value="Hand"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border CornerRadius="8"
                    Background="{TemplateBinding Background}">
              <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Margin="{TemplateBinding Padding}"/>
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style x:Key="GhostButtonStyle" TargetType="Button" BasedOn="{StaticResource RoundedButtonStyle}">
      <Setter Property="Background" Value="#FFFFFF"/>
      <Setter Property="Foreground" Value="#111827"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border CornerRadius="8"
                    Background="{TemplateBinding Background}"
                    BorderBrush="#E5E7EB"
                    BorderThickness="{TemplateBinding BorderThickness}">
              <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Margin="{TemplateBinding Padding}"/>
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <!-- Fallback local, por si el diccionario global aun no cargo -->
    <conv:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
  </Window.Resources>

  <Grid Margin="24">
    <!-- Card -->
    <Border Background="#FFFFFF" CornerRadius="12" SnapsToDevicePixels="True">
      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
          <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#1F2937" CornerRadius="12,12,0,0">
          <Border Padding="24,18">
            <StackPanel>
              <TextBlock Text="Sistema de Inventario" Foreground="#FFFFFF" FontSize="22" FontWeight="SemiBold"/>
              <TextBlock Text="Equipo de Computo" Foreground="#CBD5E1" FontSize="12"/>
            </StackPanel>
          </Border>
        </Border>

        <!-- Body -->
        <Border Grid.Row="1" Padding="24">
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Text="Iniciar Sesion"
                       Foreground="#111827"
                       FontSize="18"
                       FontWeight="SemiBold"
                       Margin="0,0,0,12"/>

            <!-- Usuario -->
            <StackPanel Grid.Row="1">
              <TextBlock Text="Usuario" Margin="0,0,0,4" Foreground="#374151" FontWeight="Medium"/>
              <TextBox Style="{StaticResource RoundedTextBoxStyle}"
                       Text="{Binding Usuario, UpdateSourceTrigger=PropertyChanged}"/>
            </StackPanel>

            <!-- Contrasena -->
            <StackPanel Grid.Row="2" Margin="0,12,0,0">
              <TextBlock Text="Contrasena" Margin="0,0,0,4" Foreground="#374151" FontWeight="Medium"/>
              <PasswordBox Style="{StaticResource RoundedPasswordBoxStyle}"
                           behaviors:PasswordBoxBehavior.Attach="True"
                           behaviors:PasswordBoxBehavior.Password="{Binding Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            </StackPanel>
          </Grid>
        </Border>

        <!-- Footer -->
        <Border Grid.Row="2" Background="#F9FAFB" CornerRadius="0,0,12,12" Padding="16">
          <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Cancelar" Command="{Binding CancelarCommand}"
                    Style="{StaticResource GhostButtonStyle}" Margin="0,0,10,0"/>
            <Button Content="Iniciar Sesion" Command="{Binding IngresarCommand}"
                    Style="{StaticResource RoundedButtonStyle}" IsDefault="True"/>
          </StackPanel>
        </Border>
      </Grid>
    </Border>

    <!-- Busy overlay -->
    <Grid Visibility="{Binding IsBusy, Converter={StaticResource BooleanToVisibilityConverter}}">
      <Rectangle Fill="#80000000" RadiusX="8" RadiusY="8"/>
      <Border Background="White" CornerRadius="8" Padding="18"
              HorizontalAlignment="Center" VerticalAlignment="Center"
              BorderBrush="#E5E7EB" BorderThickness="1">
        <StackPanel>
          <TextBlock Text="Procesando..." FontSize="14" Margin="0,0,0,8" HorizontalAlignment="Center"/>
          <ProgressBar IsIndeterminate="True" Height="4" Width="220"/>
        </StackPanel>
      </Border>
    </Grid>
  </Grid>
</Window>